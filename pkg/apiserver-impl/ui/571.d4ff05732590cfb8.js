"use strict";(self.webpackChunkdevfile_builder=self.webpackChunkdevfile_builder||[]).push([[571],{8571:(N,M,a)=>{a.r(M),a.d(M,{diagram:()=>K});var h=a(3612),u=a(5703),C=a(8814),s=a(855),w=a(5963),E=a(9111),A=a(1775);a(2735),a(1764),a(9006),a(7416),a(6780);const L=o=>s.d.sanitizeText(o,(0,s.g)());let T={dividerMargin:10,padding:5,textHeight:10,curve:void 0};function P(o){let n;switch(o){case 0:n="aggregation";break;case 1:n="extension";break;case 2:n="composition";break;case 3:n="dependency";break;case 4:n="lollipop";break;default:n="none"}return n}const K={parser:h.p,db:h.d,renderer:{setConf:function(o){T={...T,...o}},draw:function(o,n,b,i){s.l.info("Drawing class - ",n);const t=(0,s.g)().flowchart??(0,s.g)().class,r=(0,s.g)().securityLevel;s.l.info("config:",t);const l=t?.nodeSpacing??50,d=t?.rankSpacing??50,e=new C.k({multigraph:!0,compound:!0}).setGraph({rankdir:i.db.getDirection(),nodesep:l,ranksep:d,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),y=i.db.getClasses(),c=i.db.getRelations(),p=i.db.getNotes();let _;s.l.info(c),function(o,n,b,i){const t=Object.keys(o);s.l.info("keys:",t),s.l.info(o),t.forEach(function(r){var l,d;const e=o[r];let y="";e.cssClasses.length>0&&(y=y+" "+e.cssClasses.join(" "));const f={labelStyle:"",shape:"class_box",labelText:L(e.label??e.id),classData:e,rx:0,ry:0,class:y,style:"",id:e.id,domId:e.domId,tooltip:i.db.getTooltip(e.id)||"",haveCallback:e.haveCallback,link:e.link,width:"group"===e.type?500:void 0,type:e.type,padding:(null==(l=(0,s.g)().flowchart)?void 0:l.padding)??(null==(d=(0,s.g)().class)?void 0:d.padding)};n.setNode(e.id,f),s.l.info("setNode",f)})}(y,e,0,i),function(o,n){const b=(0,s.g)().flowchart;let i=0;o.forEach(function(t){var r;i++;const l={classes:"relation",pattern:1==t.relation.lineType?"dashed":"solid",id:"id"+i,arrowhead:"arrow_open"===t.type?"none":"normal",startLabelRight:"none"===t.relationTitle1?"":t.relationTitle1,endLabelLeft:"none"===t.relationTitle2?"":t.relationTitle2,arrowTypeStart:P(t.relation.type1),arrowTypeEnd:P(t.relation.type2),style:"fill:none",labelStyle:"",curve:(0,E.n)(b?.curve,u.c_6)};if(s.l.info(l,t),void 0!==t.style){const d=(0,E.m)(t.style);l.style=d.style,l.labelStyle=d.labelStyle}t.text=t.title,void 0===t.text?void 0!==t.style&&(l.arrowheadStyle="fill: #333"):(l.arrowheadStyle="fill: #333",l.labelpos="c",(null==(r=(0,s.g)().flowchart)?void 0:r.htmlLabels)??(0,s.g)().htmlLabels?(l.labelType="html",l.label='<span class="edgeLabel">'+t.text+"</span>"):(l.labelType="text",l.label=t.text.replace(s.d.lineBreakRegex,"\n"),void 0===t.style&&(l.style=l.style||"stroke: #333; stroke-width: 1.5px;fill:none"),l.labelStyle=l.labelStyle.replace("color:","fill:"))),n.setEdge(t.id1,t.id2,l,i)})}(c,e),function(o,n,b,i){s.l.info(o),o.forEach(function(t,r){var l,d;const e=t,f={labelStyle:"",shape:"note",labelText:L(e.text),noteData:e,rx:0,ry:0,class:"",style:"",id:e.id,domId:e.id,tooltip:"",type:"note",padding:(null==(l=(0,s.g)().flowchart)?void 0:l.padding)??(null==(d=(0,s.g)().class)?void 0:d.padding)};if(n.setNode(e.id,f),s.l.info("setNode",f),!e.class||!(e.class in i))return;const x=b+r,D={id:`edgeNote${x}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:(0,E.n)(T.curve,u.c_6)};n.setEdge(e.id,e.class,D,x)})}(p,e,c.length+1,y),"sandbox"===r&&(_=(0,u.Ys)("#i"+n));const g=(0,u.Ys)("sandbox"===r?_.nodes()[0].contentDocument.body:"body"),f=g.select(`[id="${n}"]`),x=g.select("#"+n+" g");if((0,w.r)(x,e,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",n),E.u.insertTitle(f,"classTitleText",t?.titleTopMargin??5,i.db.getDiagramTitle()),(0,A.s)(e,f,t?.diagramPadding,t?.useMaxWidth),!t?.htmlLabels){const D="sandbox"===r?_.nodes()[0].contentDocument:document,U=D.querySelectorAll('[id="'+n+'"] .edgeLabel .label');for(const m of U){const S=m.getBBox(),v=D.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("rx",0),v.setAttribute("ry",0),v.setAttribute("width",S.width),v.setAttribute("height",S.height),m.insertBefore(v,m.firstChild)}}}},styles:h.s,init:o=>{o.class||(o.class={}),o.class.arrowMarkerAbsolute=o.arrowMarkerAbsolute,h.d.clear()}}}}]);