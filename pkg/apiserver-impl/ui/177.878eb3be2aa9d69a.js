"use strict";(self.webpackChunkdevfile_builder=self.webpackChunkdevfile_builder||[]).push([[177],{8177:($,M,c)=>{c.r(M),c.d(M,{diagram:()=>K});var w=c(5861),x=c(2993),h=c(8586),C=c(8814),t=c(8080),A=c(8235);c(1764),c(6780),c(2735),c(1065),c(317);const m=s=>t.e.sanitizeText(s,(0,t.c)());let T={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const L=function(s,i,r,_,e){const n=Object.keys(s);t.l.info("keys:",n),t.l.info(s),n.filter(l=>s[l].parent==e).forEach(function(l){var d,a;const o=s[l],y=o.cssClasses.join(" "),p=(0,t.k)(o.styles),b={labelStyle:p.labelStyle,shape:"class_box",labelText:m(o.label??o.id),classData:o,rx:0,ry:0,class:y,style:p.style,id:o.id,domId:o.domId,tooltip:_.db.getTooltip(o.id,e)||"",haveCallback:o.haveCallback,link:o.link,width:"group"===o.type?500:void 0,type:o.type,padding:(null==(d=(0,t.c)().flowchart)?void 0:d.padding)??(null==(a=(0,t.c)().class)?void 0:a.padding)};i.setNode(o.id,b),e&&i.setParent(o.id,e),t.l.info("setNode",b)})};function k(s){let i;switch(s){case 0:i="aggregation";break;case 1:i="extension";break;case 2:i="composition";break;case 3:i="dependency";break;case 4:i="lollipop";break;default:i="none"}return i}const K={parser:x.p,db:x.d,renderer:{setConf:function(s){T={...T,...s}},draw:function(){var s=(0,w.Z)(function*(i,r,_,e){t.l.info("Drawing class - ",r);const n=(0,t.c)().flowchart??(0,t.c)().class,l=(0,t.c)().securityLevel;t.l.info("config:",n);const d=n?.nodeSpacing??50,a=n?.rankSpacing??50,o=new C.k({multigraph:!0,compound:!0}).setGraph({rankdir:e.db.getDirection(),nodesep:d,ranksep:a,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),y=e.db.getNamespaces(),p=e.db.getClasses(),f=e.db.getRelations(),v=e.db.getNotes();let u;t.l.info(f),function(s,i,r,_){const e=Object.keys(s);t.l.info("keys:",e),t.l.info(s),e.forEach(function(n){var l,d;const a=s[n],y={shape:"rect",id:a.id,domId:a.domId,labelText:m(a.id),labelStyle:"",style:"fill: none; stroke: black",padding:(null==(l=(0,t.c)().flowchart)?void 0:l.padding)??(null==(d=(0,t.c)().class)?void 0:d.padding)};i.setNode(a.id,y),L(a.classes,i,0,_,a.id),t.l.info("setNode",y)})}(y,o,0,e),L(p,o,0,e),function(s,i){const r=(0,t.c)().flowchart;let _=0;s.forEach(function(e){var n;_++;const l={classes:"relation",pattern:1==e.relation.lineType?"dashed":"solid",id:`id_${e.id1}_${e.id2}_${_}`,arrowhead:"arrow_open"===e.type?"none":"normal",startLabelRight:"none"===e.relationTitle1?"":e.relationTitle1,endLabelLeft:"none"===e.relationTitle2?"":e.relationTitle2,arrowTypeStart:k(e.relation.type1),arrowTypeEnd:k(e.relation.type2),style:"fill:none",labelStyle:"",curve:(0,t.n)(r?.curve,h.c_6)};if(t.l.info(l,e),void 0!==e.style){const d=(0,t.k)(e.style);l.style=d.style,l.labelStyle=d.labelStyle}e.text=e.title,void 0===e.text?void 0!==e.style&&(l.arrowheadStyle="fill: #333"):(l.arrowheadStyle="fill: #333",l.labelpos="c",(null==(n=(0,t.c)().flowchart)?void 0:n.htmlLabels)??(0,t.c)().htmlLabels?(l.labelType="html",l.label='<span class="edgeLabel">'+e.text+"</span>"):(l.labelType="text",l.label=e.text.replace(t.e.lineBreakRegex,"\n"),void 0===e.style&&(l.style=l.style||"stroke: #333; stroke-width: 1.5px;fill:none"),l.labelStyle=l.labelStyle.replace("color:","fill:"))),i.setEdge(e.id1,e.id2,l,_)})}(f,o),function(s,i,r,_){t.l.info(s),s.forEach(function(e,n){var l,d;const a=e,u={labelStyle:"",shape:"note",labelText:m(a.text),noteData:a,rx:0,ry:0,class:"",style:"",id:a.id,domId:a.id,tooltip:"",type:"note",padding:(null==(l=(0,t.c)().flowchart)?void 0:l.padding)??(null==(d=(0,t.c)().class)?void 0:d.padding)};if(i.setNode(a.id,u),t.l.info("setNode",u),!a.class||!(a.class in _))return;const b=r+n,g={id:`edgeNote${b}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:(0,t.n)(T.curve,h.c_6)};i.setEdge(a.id,a.class,g,b)})}(v,o,f.length+1,p),"sandbox"===l&&(u=(0,h.Ys)("#i"+r));const b=(0,h.Ys)("sandbox"===l?u.nodes()[0].contentDocument.body:"body"),g=b.select(`[id="${r}"]`),U=b.select("#"+r+" g");if(yield(0,A.r)(U,o,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",r),t.u.insertTitle(g,"classTitleText",n?.titleTopMargin??5,e.db.getDiagramTitle()),(0,t.o)(o,g,n?.diagramPadding,n?.useMaxWidth),!n?.htmlLabels){const P="sandbox"===l?u.nodes()[0].contentDocument:document,j=P.querySelectorAll('[id="'+r+'"] .edgeLabel .label');for(const D of j){const S=D.getBBox(),E=P.createElementNS("http://www.w3.org/2000/svg","rect");E.setAttribute("rx",0),E.setAttribute("ry",0),E.setAttribute("width",S.width),E.setAttribute("height",S.height),D.insertBefore(E,D.firstChild)}}});return function(r,_,e,n){return s.apply(this,arguments)}}()},styles:x.s,init:s=>{s.class||(s.class={}),s.class.arrowMarkerAbsolute=s.arrowMarkerAbsolute,x.d.clear()}}}}]);